<!DOCTYPE html>
<html>
<head>
	<title>Portfolio | Diffusion</title>
	<meta name="author" content="Kate Keefe">
	<meta name="description" content="Kate Keefe's GitHub Portfolio">
	<link rel="icon" href="media/GitHub-Mark-64px.png">

	<link href="theme/prism.css" rel="stylesheet"/>
	<link href="styles.css" rel="stylesheet"/>	
</head>
<body>
	
	<div id="header">
		<h1 id="title">Kate Keefe's Portfolio</h1>
	</div>

	<div id="pageBackground">
		<div id="page">
			<h2>Diffusion Simulation</h2>
			
			<p>A <mark>diffusion</mark> simulation reconstructed and improved for the Kennett High School Science Department, as the old flash program couldn't be run.</p>

			<p>The Science Department wanted the new Diffusion Simulation to function like before. To ensure the program would run on computers for a long time (unlike the flash program before), the Diffusion Sim was made as a webpage using <mark>HTML</mark>, <mark>CSS</mark> and <mark>JavaScript</mark>.</p>

			<p>The original flash program did not look too complicated. It basically had green particles that bounced around a box with a divider in the middle. The point of the simulation was to demonstrate the random movement of particles. After a certain amount of time, the particles would be equal on each side of the divider, despite their random motion.</p>

			<hr>
			
			<p>The Science Department also wanted a few extra changes, since the Diffusion Sim was being remade from scratch. </p>

			<img class="shadow" src="./media/Diffusion sim markup.png" alt="Diffusion sim markup">
			<p class="caption">Picture of the Diffusion Sim with changes requested by the Science Department.</p>

			<div class="outline">
				<h4>The new requirements were:</h4>
				<ul>
					<li>A timer built into the page</li>
					<li>Larger molecules that can't cross the divider</li>
					<li>Sliders for adjusting the size of the molecules</li>
					<li>Active Transport to force molecules back to the starting side</li>
					<li>A button to enable/disable Active Transport</li>
					<li>Buttons to adjust the temperature</li>
				</ul>
			</div>

			<p>After recreating the old Diffusion Sim, these requirements weren't too tricky.</p>
			
			<hr>
			<div class="center">
				<h3>View The Diffusion Simulation</h3>

				<a href="https://eaglesoftworks.github.io/Diffusion/" target="_blank"><button>Visit Website</button></a>
				
				<a href="https://github.com/EagleSoftworks/Diffusion" target="_blank"><button>View on GitHub</button></a>
			</div>

			<!--<div class="iframeContainer">
				<iframe id="diffusionSim" src="https://eaglesoftworks.github.io/Diffusion/"></iframe>
			</div>-->

			<hr>

			<h3>Code Snippets</h3>

			<p><mark>toggleTimer</mark> is a function that is used to start and stop the Diffusion Sim. It uses a timer called <mark>canvasDrawing</mark> to call the <mark>drawCanvas()</mark> function every <mark>100ms</mark> and another timer called <mark>timerTicking</mark> to call the <mark>tick()</mark> function every <mark>1000ms</mark>. A <mark>boolean</mark> called <mark>timerOn</mark> is used to track if the simulation is running.</p>

<pre><code class="language-javascript match-braces rainbow-braces line-numbers">// Toggles timer (and drawing) on/off
function toggleTimer() {
	if (timerOn === false && timerInput.value > 0) {
		timerOn = true;
		timerBtnSpan.textContent = "Pause";
		canvasDrawing = setInterval(drawCanvas, 100);
		timerTicking = setInterval(tick, 1000);
		countLSpan.textContent = "";
		countRSpan.textContent = "";
	}
	else {
		timerOn = false;
		timerBtnSpan.textContent = "Start";
		clearInterval(canvasDrawing);
		clearInterval(timerTicking);
		countMolecules();
	}
}</code></pre>
			
			<p><mark>updateMolecule()</mark> and molecule class</p>
<pre><code class="language-javascript match-braces rainbow-braces line-numbers">class Molecule {

		constructor(moleculeType, startX, startY) {
			this.moleculeType = moleculeType;
			this.x = startX;
			this.y = startY;
		}
	
		/************************************/
	
		/************************************/
	
		/************************************/
	
		updateMolecule() {
			let randomX, randomY, radius;
			if (this.moleculeType == moleculeEnum.smallMolecule) {
				radius = parseInt(mole2Radius);
				
				// Random added value in a variable so it can be removed
				randomX = randomCo();
				randomY = randomCo();
				this.x += randomX;
				this.y += randomY;
				
				// Only looks to see if X is inside the canvas, go the other way
				if (!isInCanvas(radius, this.x, 200)) {
					this.x -= (randomX * 2);
				}
				// Only looks to see if Y is inside the canvas, go the other way
				if (!isInCanvas(radius, 200, this.y)) {
					this.y -= (randomY * 2);
				}
				
				// Only do other checks if molecule is in a certain range
				if (this.x >= (wallX - radius) && this.x <= (440 + radius)) {
					if (isInWall(radius, this.x, this.y)) {
						// If molecule's inside the port, move it so it's not hitting the top or bottom
						if (isInPort(1, -Math.abs(randomY), this.y)) {
							if (this.y < (145 + radius)) {
								this.y = (145 + radius);
							}
							else if (this.y > (220 - radius)) {
								this.y = (220 - radius);
							}
						}
						else if (isInPort(2, -Math.abs(randomY), this.y)) {
							if (this.y < (280 + radius)) {
								this.y = 280 + radius;
							}
							else if (this.y > (355 - radius)) {
								this.y = 355 - radius;
							}
						}
						// Move molecules away from the wall
						else {
							// Check for x or y, then adjust accordingly
							if (this.x < 375) {
								// Sets molecule outside wall
								this.x = wallX - radius;
							}
							else {
								// Fix this to do the same as the other
								this.x = wallX + wallWidth + radius;
							}
						}
						//clearInterval(canvasDrawing);
						//clearInterval(timerTicking);
					}
					else if (this.x > (wallXEnd)) {
						if (isInAT(1, radius, this.x, this.y)) {
							this.x = 325 - radius;
							this.y = 70;
						}
						else if (isInAT(2, radius, this.x, this.y)) {
							this.x = 325 - radius;
							this.y = 430;
						}
					}
				}
			}
			// Separated big molecule checks
			else if (this.moleculeType == moleculeEnum.bigMolecule) {
				radius = parseInt(mole1Radius);
				
				randomX = randomCo();
				randomY = randomCo();
				this.x += randomX;
				this.y += randomY;
				
				// Only looks to see if X is inside the canvas, go the other way
				if (!isInCanvas(radius, this.x, 200) || this.x > (wallX-radius)) {
					this.x -= (randomX * 2);
				}
				// Only looks to see if Y is inside the canvas, go the other way
				if (!isInCanvas(radius, 200, this.y)) {
					this.y -= (randomY * 2);
				}
			}
		}
	
		draw() {
			// Draws Large molecule type
			if (this.moleculeType == moleculeEnum.bigMolecule) {
				// Linear gradient for style
				let gradient = ctx.createLinearGradient(this.x-75, 0, this.x+100, 0);
				gradient.addColorStop(0, "#540000");
				gradient.addColorStop(0.5, "red");
				gradient.addColorStop(1, "#ffac75");
					
				draw.circle(this.x, this.y, mole1Radius, gradient);
			} else {
				// Draws Small molecule type
				let gradient = ctx.createRadialGradient(this.x, this.y, mole2Radius*(2/3), this.x, this.y, mole2Radius*(2/15));
				gradient.addColorStop(0, "#002602");
				gradient.addColorStop(0.75, "#47772c"); // inside color
				
				draw.circle(this.x, this.y, mole2Radius, gradient);
			}
		}
	}
</code></pre>

		</div>
	</div>

	<div id="footer">
		<span id="footerText">Portfolio & website made by Kate Keefe</span>
		<a href="https://github.com/Kmek/Portfolio" target="_blank"><button id="githubBtn">View on GitHub</button></a>
	</div>
	
	<script src="theme/prism.js"></script>
	<script src="script.js"></script>
</body>
</html>